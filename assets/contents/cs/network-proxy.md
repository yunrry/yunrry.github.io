# 11. ν”„λ΅μ‹ (Proxy)

## π“ κ°λ…

```
ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ‚¬μ΄μ μ¤‘κ³„ μ„λ²„
- μ”μ²­μ„ λ€μ‹  μ „λ‹¬
- μ‘λ‹µμ„ λ€μ‹  λ°›μ
- μ¤‘κ°„μ—μ„ λ‹¤μ–‘ν• κΈ°λ¥ μν–‰
```

### κΈ°λ³Έ κµ¬μ΅°

```
μ§μ ‘ μ—°κ²°:
Client β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€> Server

ν”„λ΅μ‹ μ‚¬μ©:
Client β”€β”€> Proxy β”€β”€> Server
         μ¤‘κ³„ μ„λ²„
```

---

## π”µ Forward Proxy (ν¬μ›λ“ ν”„λ΅μ‹)

### κ°λ…

```
ν΄λΌμ΄μ–ΈνΈλ¥Ό λ€μ‹ ν•μ—¬ μ”μ²­
- ν΄λΌμ΄μ–ΈνΈ μΈ΅ ν”„λ΅μ‹
- ν΄λΌμ΄μ–ΈνΈλ¥Ό μ¨κΉ€
- μ„λ²„λ” ν”„λ΅μ‹λ§ λ΄„
```

### κµ¬μ΅°

```
[Client1]  β”
[Client2]  β”β”€> [Forward Proxy] β”€β”€> [Server]
[Client3]  β”
 
ν΄λΌμ΄μ–ΈνΈ μ—¬λ¬ λ… β†’ ν”„λ΅μ‹ 1κ° β†’ μ„λ²„

μ„λ²„ μ…μ¥:
- ν΄λΌμ΄μ–ΈνΈ IP λ¨λ¦„
- ν”„λ΅μ‹ IPλ§ λ³΄μ„
```

### λ™μ‘ κ³Όμ •

```
1. Client β†’ Forward Proxy
   "google.com μ ‘μ†ν•΄μ¤"

2. Forward Proxy β†’ Server (google.com)
   ν”„λ΅μ‹κ°€ λ€μ‹  μ”μ²­

3. Server β†’ Forward Proxy
   μ‘λ‹µ μ „λ‹¬

4. Forward Proxy β†’ Client
   μ‘λ‹µ μ „λ‹¬

Clientλ” Serverμ™€ μ§μ ‘ ν†µμ‹  μ• ν•¨ β…
```

### μ£Όμ” κΈ°λ¥

#### 1. μµλ…μ„± (Anonymity)

```
ν΄λΌμ΄μ–ΈνΈ IP μ¨κΉ€

Client (192.168.1.10)
  β†“
Proxy (203.0.113.5)
  β†“
Server

Serverκ°€ λ³΄λ” IP: 203.0.113.5 (ν”„λ΅μ‹)
μ‹¤μ  Client IP: 192.168.1.10 (μ¨κ²¨μ§) β…

μ‚¬μ©:
- μµλ… λΈλΌμ°μ§•
- μ°ν μ ‘μ†
```

#### 2. μΊμ‹± (Caching)

```
μμ£Ό μ”μ²­λλ” μ½ν…μΈ  μ €μ¥

μ²« μ”μ²­:
Client β†’ Proxy β†’ Server (λλ¦Ό)
        β””β”€ μ‘λ‹µ μ €μ¥

μ΄ν›„ μ”μ²­:
Client β†’ Proxy (μΊμ‹μ—μ„ μ¦‰μ‹ μ‘λ‹µ) β…
        X Server (μ”μ²­ μ• ν•¨)

μ¥μ :
- λΉ λ¥Έ μ‘λ‹µ
- μ„λ²„ λ¶€ν• κ°μ†
- λ€μ—­ν­ μ μ•½
```

#### 3. μ ‘κ·Ό μ μ–΄ (Access Control)

```
νΉμ • μ‚¬μ΄νΈ μ°¨λ‹¨

μ: νμ‚¬ λ„¤νΈμ›ν¬
- facebook.com μ°¨λ‹¨ β
- youtube.com μ°¨λ‹¨ β
- μ—…λ¬΄ μ‚¬μ΄νΈλ§ ν—μ© β…

ν”„λ΅μ‹κ°€ URL ν•„ν„°λ§
```

#### 4. λ΅κΉ… (Logging)

```
λ¨λ“  μ”μ²­ κΈ°λ΅

λ΅κ·Έ:
- μ‚¬μ©μ: user1
- μ‹κ°„: 2025-10-19 14:30:00
- URL: google.com
- ν¬κΈ°: 1.2MB

μ©λ„:
- μ‚¬μ© ν¨ν„΄ λ¶„μ„
- λ³΄μ• κ°μ‚¬
- νΈλν”½ λ¨λ‹ν„°λ§
```

---

## π”΄ Reverse Proxy (λ¦¬λ²„μ¤ ν”„λ΅μ‹)

### κ°λ…

```
μ„λ²„λ¥Ό λ€μ‹ ν•μ—¬ μ‘λ‹µ
- μ„λ²„ μΈ΅ ν”„λ΅μ‹
- μ„λ²„λ¥Ό μ¨κΉ€
- ν΄λΌμ΄μ–ΈνΈλ” ν”„λ΅μ‹λ§ λ΄„
```

### κµ¬μ΅°

```
[Client] β”€β”€> [Reverse Proxy] β”€β”€> β”β”€ [Server1]
                                 β”β”€ [Server2]
                                 β””β”€ [Server3]

ν΄λΌμ΄μ–ΈνΈ β†’ ν”„λ΅μ‹ 1κ° β†’ μ„λ²„ μ—¬λ¬ κ°

ν΄λΌμ΄μ–ΈνΈ μ…μ¥:
- μ‹¤μ  μ„λ²„ IP λ¨λ¦„
- ν”„λ΅μ‹ IPλ§ λ³΄μ„
```

### λ™μ‘ κ³Όμ •

```
1. Client β†’ Reverse Proxy
   "example.com μ ‘μ†"

2. Reverse Proxy β†’ Server (μ‹¤μ  μ„λ²„ μ„ νƒ)
   Server1, Server2, Server3 μ¤‘ μ„ νƒ

3. Server β†’ Reverse Proxy
   μ‘λ‹µ μ „λ‹¬

4. Reverse Proxy β†’ Client
   μ‘λ‹µ μ „λ‹¬

Clientλ” μ‹¤μ  Serverλ¥Ό λ¨λ¦„ β…
```

### μ£Όμ” κΈ°λ¥

#### 1. λ΅λ“ λ°Έλ°μ‹±

```
μ—¬λ¬ μ„λ²„μ— νΈλν”½ λ¶„μ‚°

Client1 β†’ Reverse Proxy β†’ Server1
Client2 β†’ Reverse Proxy β†’ Server2
Client3 β†’ Reverse Proxy β†’ Server3
Client4 β†’ Reverse Proxy β†’ Server1

μ•κ³ λ¦¬μ¦:
- Round Robin
- Least Connections
- IP Hash

ν¨κ³Ό:
- λ¶€ν• λ¶„μ‚°
- κ³ κ°€μ©μ„±
```

#### 2. SSL μΆ…λ£ (SSL Termination)

```
HTTPS μ•”νΈν™”/λ³µνΈν™”λ¥Ό ν”„λ΅μ‹κ°€ μ²λ¦¬

Client β†[HTTPS]β†’ Reverse Proxy β†[HTTP]β†’ Server
        μ•”νΈν™”               ν‰λ¬Έ

μ¥μ :
- μ„λ²„ λ¶€ν• κ°μ†
- μΈμ¦μ„ μ¤‘μ•™ κ΄€λ¦¬
- μ„λ²„λ” HTTPλ§ μ²λ¦¬

Reverse Proxy:
- SSL μΈμ¦μ„ μ„¤μΉ
- μ•”νΈν™”/λ³µνΈν™” μν–‰
- ν‰λ¬ΈμΌλ΅ μ„λ²„ μ „λ‹¬
```

#### 3. μΊμ‹±

```
μ •μ  μ½ν…μΈ  μΊμ‹±

μ²« μ”μ²­:
Client β†’ Reverse Proxy β†’ Server
        β””β”€ μ΄λ―Έμ§€, CSS, JS μ €μ¥

μ΄ν›„ μ”μ²­:
Client β†’ Reverse Proxy (μΊμ‹ μ‘λ‹µ) β…
        X Server

ν¨κ³Ό:
- μ„λ²„ λ¶€ν• κ°μ†
- λΉ λ¥Έ μ‘λ‹µ
```

#### 4. λ³΄μ•

```
μ‹¤μ  μ„λ²„ λ³΄νΈ

Clientλ” Reverse Proxyλ§ λ΄„
  β†“
λ°©ν™”λ²½, DDoS λ°©μ–΄
  β†“
μ‹¤μ  Server (λ‚΄λ¶€ λ„¤νΈμ›ν¬)

κ³µκ²©:
- ν”„λ΅μ‹κ°€ λ¨Όμ € λ°›μ
- ν•„ν„°λ§ ν›„ μ„λ²„ μ „λ‹¬
- μ„λ²„ μ§μ ‘ λ…Έμ¶ μ• λ¨ β…
```

#### 5. μ••μ¶•

```
μ‘λ‹µ λ°μ΄ν„° μ••μ¶•

Server β†’ Reverse Proxy (ν‰λ¬Έ 10MB)
        β†“ gzip μ••μ¶•
Client β† 2MB

ν¨κ³Ό:
- λ€μ—­ν­ μ μ•½
- λΉ λ¥Έ μ „μ†΅
```

---

## π† Forward Proxy vs Reverse Proxy

| κµ¬λ¶„ | Forward Proxy | Reverse Proxy |
|------|---------------|---------------|
| **μ„μΉ** | ν΄λΌμ΄μ–ΈνΈ μΈ΅ | μ„λ²„ μΈ΅ |
| **μ¨κΈ°λ” λ€μƒ** | ν΄λΌμ΄μ–ΈνΈ | μ„λ²„ |
| **μ©λ„** | μ ‘κ·Ό μ μ–΄, μµλ…μ„± | λ΅λ“λ°Έλ°μ‹±, λ³΄μ• |
| **μΊμ‹±** | ν΄λΌμ΄μ–ΈνΈ μΊμ‹ | μ„λ²„ μΊμ‹ |
| **μ„¤μ •** | ν΄λΌμ΄μ–ΈνΈ μ„¤μ • | μ„λ²„ μ„¤μ • |
| **μμ‹** | νμ‚¬ ν”„λ΅μ‹, VPN | Nginx, Apache |

---

## π’» ν”„λ΅μ‹ κµ¬ν„

### Nginx (Reverse Proxy)

```nginx
# nginx.conf

http {
    # μ—…μ¤νΈλ¦Ό μ„λ²„ μ •μ
    upstream backend {
        server 192.168.1.10:8080;
        server 192.168.1.11:8080;
        server 192.168.1.12:8080;
    }
    
    # μΊμ‹ μ„¤μ •
    proxy_cache_path /var/cache/nginx 
                     levels=1:2 
                     keys_zone=my_cache:10m 
                     max_size=1g;
    
    server {
        listen 80;
        server_name example.com;
        
        location / {
            # λ¦¬λ²„μ¤ ν”„λ΅μ‹ μ„¤μ •
            proxy_pass http://backend;
            
            # ν—¤λ” μ„¤μ •
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            
            # μΊμ‹±
            proxy_cache my_cache;
            proxy_cache_valid 200 1h;
            proxy_cache_use_stale error timeout;
            
            # νƒ€μ„μ•„μ›ƒ
            proxy_connect_timeout 30s;
            proxy_send_timeout 30s;
            proxy_read_timeout 30s;
        }
        
        # μ •μ  νμΌ μΊμ‹±
        location ~* \.(jpg|jpeg|png|gif|css|js)$ {
            proxy_pass http://backend;
            proxy_cache my_cache;
            proxy_cache_valid 200 1d;
            expires 1d;
        }
    }
    
    # HTTPS μ„¤μ •
    server {
        listen 443 ssl;
        server_name example.com;
        
        ssl_certificate /etc/ssl/certs/example.com.crt;
        ssl_certificate_key /etc/ssl/private/example.com.key;
        
        location / {
            proxy_pass http://backend;
        }
    }
}
```

### Squid (Forward Proxy)

```
# squid.conf

# ν¬νΈ μ„¤μ •
http_port 3128

# μΊμ‹ μ„¤μ •
cache_dir ufs /var/spool/squid 10000 16 256

# μ ‘κ·Ό μ μ–΄ (ACL)
acl localnet src 192.168.1.0/24
acl blocked_sites dstdomain .facebook.com
acl blocked_sites dstdomain .youtube.com

# κ·μΉ™
http_access deny blocked_sites
http_access allow localnet
http_access deny all

# λ΅κ·Έ
access_log /var/log/squid/access.log
cache_log /var/log/squid/cache.log
```

---

## π ν”„λ΅μ‹ μ„λ²„ μμ‹

### κ³µκ° ν”„λ΅μ‹

```
λ¬΄λ£/μ λ£ ν”„λ΅μ‹ μ„λΉ„μ¤:
- Squid Proxy
- Privoxy
- TinyProxy

μƒμ© μ„λΉ„μ¤:
- ProxyMesh
- Bright Data
- Smartproxy

μ£Όμ:
- λ³΄μ• μ„ν— (νΈλν”½ κ°μ²­ κ°€λ¥)
- μ‹ λΆ°ν•  μ μλ” μ„λΉ„μ¤ μ‚¬μ©
```

### κΈ°μ—… ν”„λ΅μ‹

```
νμ‚¬ λ„¤νΈμ›ν¬μ—μ„ μ‚¬μ©

λ©μ :
- μΈν„°λ„· μ ‘κ·Ό μ μ–΄
- νΈλν”½ λ¨λ‹ν„°λ§
- λ€μ—­ν­ κ΄€λ¦¬
- λ³΄μ• κ°•ν™”

κΈ°λ¥:
- μ›Ή ν•„ν„°λ§
- λ°”μ΄λ¬μ¤ κ²€μ‚¬
- μ‚¬μ© λ΅κ·Έ κΈ°λ΅
```

---

## π’¬ λ©΄μ ‘ λ‹µλ³€ μμ‹

### μ§§μ€ λ‹µλ³€
```
ν”„λ΅μ‹λ” ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ‚¬μ΄μ μ¤‘κ³„ μ„λ²„μ…λ‹λ‹¤.

Forward Proxy (ν΄λΌμ΄μ–ΈνΈ μΈ΅):
- ν΄λΌμ΄μ–ΈνΈλ¥Ό μ¨κΉ€
- μ ‘κ·Ό μ μ–΄, μΊμ‹±
- μ: νμ‚¬ ν”„λ΅μ‹

Reverse Proxy (μ„λ²„ μΈ΅):
- μ„λ²„λ¥Ό μ¨κΉ€
- λ΅λ“λ°Έλ°μ‹±, SSL μΆ…λ£
- μ: Nginx

μ°¨μ΄μ :
- Forward: ν΄λΌμ΄μ–ΈνΈ λ³΄νΈ
- Reverse: μ„λ²„ λ³΄νΈ
```

### μƒμ„Έ λ‹µλ³€
```
ν”„λ΅μ‹ (Proxy):

μ •μ:
ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ μ‚¬μ΄μ—μ„ μ”μ²­μ„ μ¤‘κ³„ν•λ” μ„λ²„
- μ¤‘κ°„μ μ—­ν• 
- λ‹¤μ–‘ν• κΈ°λ¥ μν–‰

Forward Proxy (ν¬μ›λ“ ν”„λ΅μ‹):

μ„μΉ: ν΄λΌμ΄μ–ΈνΈ μΈ΅
μ—­ν• : ν΄λΌμ΄μ–ΈνΈλ¥Ό λ€μ‹ ν•μ—¬ μ”μ²­

κµ¬μ΅°:
Client β†’ Forward Proxy β†’ Server

μ„λ²„ μ…μ¥:
- ν΄λΌμ΄μ–ΈνΈ IP λ¨λ¦„
- ν”„λ΅μ‹ IPλ§ λ³΄μ„

κΈ°λ¥:
1. μµλ…μ„±: ν΄λΌμ΄μ–ΈνΈ IP μ¨κΉ€
2. μΊμ‹±: μμ£Ό μ”μ²­λλ” μ½ν…μΈ  μ €μ¥
3. μ ‘κ·Ό μ μ–΄: νΉμ • μ‚¬μ΄νΈ μ°¨λ‹¨
4. λ΅κΉ…: νΈλν”½ λ¨λ‹ν„°λ§
5. μ••μ¶•: λ°μ΄ν„° μ••μ¶•

μ‚¬μ© μ‚¬λ΅€:
- νμ‚¬ λ„¤νΈμ›ν¬ (μΈν„°λ„· μ μ–΄)
- VPN (μ°ν μ ‘μ†)
- μ›Ή μ¤ν¬λν•‘

Reverse Proxy (λ¦¬λ²„μ¤ ν”„λ΅μ‹):

μ„μΉ: μ„λ²„ μΈ΅
μ—­ν• : μ„λ²„λ¥Ό λ€μ‹ ν•μ—¬ μ‘λ‹µ

κµ¬μ΅°:
Client β†’ Reverse Proxy β†’ Multiple Servers

ν΄λΌμ΄μ–ΈνΈ μ…μ¥:
- μ‹¤μ  μ„λ²„ IP λ¨λ¦„
- ν”„λ΅μ‹ IPλ§ λ³΄μ„

κΈ°λ¥:
1. λ΅λ“ λ°Έλ°μ‹±:
   - μ—¬λ¬ μ„λ²„μ— νΈλν”½ λ¶„μ‚°
   - κ³ κ°€μ©μ„±

2. SSL μΆ…λ£:
   - HTTPS μ•”νΈν™”/λ³µνΈν™”
   - μ„λ²„ λ¶€ν• κ°μ†

3. μΊμ‹±:
   - μ •μ  μ½ν…μΈ  μ €μ¥
   - μ„λ²„ λ¶€ν• κ°μ†

4. λ³΄μ•:
   - μ‹¤μ  μ„λ²„ λ³΄νΈ
   - DDoS λ°©μ–΄

5. μ••μ¶•:
   - μ‘λ‹µ λ°μ΄ν„° μ••μ¶•

μ‚¬μ© μ‚¬λ΅€:
- μ›Ή μ„λ²„ (Nginx, Apache)
- API Gateway
- CDN

μ°¨μ΄μ :

Forward Proxy:
- ν΄λΌμ΄μ–ΈνΈλ¥Ό μ¨κΉ€
- λ‚κ°€λ” νΈλν”½ μ μ–΄
- ν΄λΌμ΄μ–ΈνΈκ°€ μ„¤μ •

Reverse Proxy:
- μ„λ²„λ¥Ό μ¨κΉ€
- λ“¤μ–΄μ¤λ” νΈλν”½ μ μ–΄
- μ„λ²„κ°€ μ„¤μ •

μ‹¤λ¬΄:
- Nginx: κ°€μ¥ λ§μ΄ μ‚¬μ©λλ” λ¦¬λ²„μ¤ ν”„λ΅μ‹
- HAProxy: λ΅λ“λ°Έλ°μ‹± νΉν™”
- Squid: ν¬μ›λ“ ν”„λ΅μ‹
- Apache: λ²”μ© μ›Ή μ„λ²„/ν”„λ΅μ‹

ν”„λ΅μ‹ μ²΄μΈ:
Client β†’ Forward Proxy β†’ Reverse Proxy β†’ Server
μµλ…μ„± κ°•ν™”, λ‹¤μΈµ λ³΄μ•
```

---

# 12. CDN (Content Delivery Network)

## π“ κ°λ…

```
μ „ μ„Έκ³„μ— λ¶„μ‚°λ μ„λ²„ λ„¤νΈμ›ν¬
- μ½ν…μΈ λ¥Ό μ‚¬μ©μμ™€ κ°€κΉμ΄ κ³³μ—μ„ μ κ³µ
- λΉ λ¥Έ μ†λ„
- μ„λ²„ λ¶€ν• λ¶„μ‚°
```

### κΈ°λ³Έ μ›λ¦¬

```
CDN μ—†μ΄:
ν•κµ­ μ‚¬μ©μ β†’ λ―Έκµ­ μ„λ²„ (λλ¦Ό) β
        14,000km κ±°λ¦¬

CDN μ‚¬μ©:
ν•κµ­ μ‚¬μ©μ β†’ ν•κµ­ CDN μ„λ²„ (λΉ λ¦„) β…
        κ·Όκ±°λ¦¬
```

---

## π CDN κµ¬μ΅°

### κΈ€λ΅λ² λ¶„μ‚°

```
Origin Server (μ›λ³Έ μ„λ²„):
- λ―Έκµ­ (λ³Έμ‚¬)

Edge Servers (μ—£μ§€ μ„λ²„):
- μ„μΈ
- λ„μΏ„
- μ‹±κ°€ν¬λ¥΄
- ν”„λ‘ν¬ν‘Έλ¥΄νΈ
- λ°λ
- λ‰΄μ•
- μ‹λ“λ‹
...μ „ μ„Έκ³„ μλ°± κ³³

μ‚¬μ©μλ” κ°€μ¥ κ°€κΉμ΄ Edge Server μ ‘μ† β…
```

### κ³„μΈµ κµ¬μ΅°

```
          [Origin Server]
                 |
         [Regional Cache]
          /      |      \
    [Edge]   [Edge]   [Edge]
     / \      / \      / \
  Users   Users    Users

3λ‹¨κ³„:
1. Origin: μ›λ³Έ μ½ν…μΈ 
2. Regional: μ§€μ—­λ³„ μΊμ‹
3. Edge: μµμΆ… μ‚¬μ©μμ™€ κ°€κΉμ›€
```

---

## π”„ CDN λ™μ‘ κ³Όμ •

### μ²« μ”μ²­ (Cache Miss)

```
1. μ‚¬μ©μ μ”μ²­:
   ν•κµ­ μ‚¬μ©μ β†’ "example.com/image.jpg"

2. DNS μ΅°ν:
   example.com β†’ κ°€μ¥ κ°€κΉμ΄ CDN μ„λ²„ IP
   β†’ μ„μΈ CDN μ„λ²„

3. μ„μΈ CDN ν™•μΈ:
   image.jpg μλ‚? β†’ μ—†μ (Cache Miss)

4. Originμ—μ„ κ°€μ Έμ΄:
   μ„μΈ CDN β†’ Origin Server (λ―Έκµ­)
   image.jpg λ‹¤μ΄λ΅λ“

5. μΊμ‹± λ° μ‘λ‹µ:
   μ„μΈ CDNμ— μ €μ¥
   μ‚¬μ©μμ—κ² μ‘λ‹µ

μ²« μ”μ²­: λλ¦Ό (OriginκΉμ§€ κ°€μ•Ό ν•¨)
```

### μ΄ν›„ μ”μ²­ (Cache Hit)

```
1. μ‚¬μ©μ μ”μ²­:
   λ‹¤λ¥Έ ν•κµ­ μ‚¬μ©μ β†’ "example.com/image.jpg"

2. DNS μ΅°ν:
   μ„μΈ CDN μ„λ²„

3. μ„μΈ CDN ν™•μΈ:
   image.jpg μμ! (Cache Hit) β…

4. μ¦‰μ‹ μ‘λ‹µ:
   μ„μΈ CDN β†’ μ‚¬μ©μ
   (Origin μ ‘μ† λ¶ν•„μ”)

μ΄ν›„ μ”μ²­: λ§¤μ° λΉ λ¦„ β…
```

---

## π― CDN μ£Όμ” κΈ°λ¥

### 1. μΊμ‹±

```
μ •μ  μ½ν…μΈ  μ €μ¥:
- μ΄λ―Έμ§€ (JPG, PNG, GIF)
- λ™μμƒ (MP4, WebM)
- CSS, JavaScript
- ν°νΈ νμΌ
- λ¬Έμ„ (PDF)

TTL (Time To Live):
- μΊμ‹ μ ν¨ μ‹κ°„ μ„¤μ •
- μ: 1μΌ, 1μ£ΌμΌ, 1κ°μ›”

Cache-Control ν—¤λ”:
Cache-Control: max-age=86400
β†’ 24μ‹κ°„ μΊμ‹±
```

### 2. μ§€λ¦¬μ  λ¶„μ‚°

```
Geo-Routing (μ§€μ—­ κΈ°λ° λΌμ°ν…):

ν•κµ­ μ‚¬μ©μ β†’ μ„μΈ CDN
μΌλ³Έ μ‚¬μ©μ β†’ λ„μΏ„ CDN
λ―Έκµ­ μ‚¬μ©μ β†’ λ‰΄μ• CDN

κΈ°μ¤€:
- λ¬Όλ¦¬μ  κ±°λ¦¬
- λ„¤νΈμ›ν¬ μ§€μ—°(Latency)
- μ„λ²„ λ¶€ν•

ν¨κ³Ό:
- λΉ λ¥Έ μ‘λ‹µ μ†λ„
- λ‚®μ€ μ§€μ—°μ‹κ°„
```

### 3. λ΅λ“ λ°Έλ°μ‹±

```
μ—¬λ¬ CDN μ„λ²„μ— νΈλν”½ λ¶„μ‚°

μ„μΈ CDN:
- Server 1: 60% λ¶€ν•
- Server 2: 40% λ¶€ν•
- Server 3: 50% λ¶€ν•

μƒ μ”μ²­ β†’ Server 2 (λ¶€ν• λ‚®μ)

ν¨κ³Ό:
- κ³ κ°€μ©μ„±
- μ¥μ•  λ€μ‘
```

### 4. DDoS λ°©μ–΄

```
λ¶„μ‚° μ„λΉ„μ¤ κ±°λ¶€ κ³µκ²© λ°©μ–΄

κ³µκ²©:
- 1μ–µ κ° μ”μ²­/μ΄

CDN:
- μ „ μ„Έκ³„ μ„λ²„μ— λ¶„μ‚°
- κ° μ„λ²„: 10λ§ κ°/μ΄
- κ°λ‹Ή κ°€λ¥ β…

Origin Server:
- μ§μ ‘ κ³µκ²© μ• λ°›μ
- CDNμ΄ λ³΄νΈ
```

### 5. SSL/TLS

```
HTTPS μ§€μ›

CDNμ—μ„ SSL μΆ…λ£:
User β†[HTTPS]β†’ CDN β†[HTTP/HTTPS]β†’ Origin
      μ•”νΈν™”          μ„ νƒ κ°€λ¥

μ¥μ :
- λΉ λ¥Έ SSL μ²λ¦¬
- μΈμ¦μ„ μ¤‘μ•™ κ΄€λ¦¬
```

### 6. μ••μ¶•

```
μλ™ μ••μ¶• (Gzip, Brotli)

Origin: 10MB HTML
  β†“ CDN μ••μ¶•
User: 2MB μ „μ†΅

ν¨κ³Ό:
- λ€μ—­ν­ μ μ•½
- λΉ λ¥Έ λ΅λ”©
```

### 7. μ΄λ―Έμ§€ μµμ ν™”

```
μλ™ λ³€ν™:
- WebP μ§€μ› λΈλΌμ°μ € β†’ WebP
- κµ¬ν• λΈλΌμ°μ € β†’ JPEG/PNG

ν¬κΈ° μ΅°μ •:
- μ›λ³Έ: 4000x3000
- λ¨λ°”μΌ: 800x600 (μλ™ λ¦¬μ‚¬μ΄μ§•)

ν¨κ³Ό:
- μ©λ‰ κ°μ†
- λΉ λ¥Έ λ΅λ”©
```

---

## π“ CDN μΆ…λ¥

### Push CDN

```
μ›λ³Έ μ„λ²„κ°€ μ½ν…μΈ λ¥Ό CDNμ— μ§μ ‘ μ—…λ΅λ“

λ™μ‘:
1. κ°λ°μκ°€ μ½ν…μΈ  μ—…λ΅λ“
2. CDNμ΄ λ¨λ“  μ„λ²„μ— λ³µμ 
3. μ‚¬μ©μ μ”μ²­ μ‹ μ¦‰μ‹ μ κ³µ

μ¥μ :
- ν•­μƒ μΊμ‹λ¨
- λΉ λ¥Έ μ‘λ‹µ

λ‹¨μ :
- μλ™ κ΄€λ¦¬
- μ €μ¥ κ³µκ°„ μ‚¬μ©

μ‚¬μ©:
- λ³€κ²½μ΄ μ μ€ μ½ν…μΈ 
- μ •μ  μ‚¬μ΄νΈ
```

### Pull CDN

```
μ‚¬μ©μ μ”μ²­ μ‹ Originμ—μ„ κ°€μ Έμ΄

λ™μ‘:
1. μ‚¬μ©μ μ”μ²­
2. CDNμ— μ—†μΌλ©΄ Originμ—μ„ κ°€μ Έμ΄
3. CDNμ— μΊμ‹±
4. μ΄ν›„ μ”μ²­μ€ μΊμ‹ μ κ³µ

μ¥μ :
- μλ™ν™”
- μ €μ¥ κ³µκ°„ ν¨μ¨μ 

λ‹¨μ :
- μ²« μ”μ²­ λλ¦Ό

μ‚¬μ©:
- λ€λ¶€λ¶„μ μ›Ήμ‚¬μ΄νΈ (μΌλ°μ ) β…
```

---

## πΆ μ£Όμ” CDN μ κ³µμ

### 1. Cloudflare

```
νΉμ§•:
- λ¬΄λ£ ν”λ μ κ³µ
- κΈ€λ΅λ² λ„¤νΈμ›ν¬
- DDoS λ°©μ–΄
- DNS μ„λΉ„μ¤

μ„μΉ:
- μ „ μ„Έκ³„ 200+ λ„μ‹
```

### 2. AWS CloudFront

```
νΉμ§•:
- AWS ν†µν•©
- S3, EC2 μ—°λ™
- Lambda@Edge

κ°€κ²©:
- μ‚¬μ©λ‰ κΈ°λ°
```

### 3. Akamai

```
νΉμ§•:
- κ°€μ¥ μ¤λλ CDN
- μ—”ν„°ν”„λΌμ΄μ¦κΈ‰
- κ³ μ„±λ¥

μ μ μ¨:
- μ „ μ„Έκ³„ 1μ„
```

### 4. Fastly

```
νΉμ§•:
- μ‹¤μ‹κ°„ μΊμ‹ μ κ±°
- VCL (Varnish Configuration Language)
- μ—£μ§€ μ»΄ν“¨ν…

μ‚¬μ©:
- GitHub, Stripe
```

### 5. Google Cloud CDN

```
νΉμ§•:
- Google λ„¤νΈμ›ν¬
- GCP ν†µν•©
- YouTube μΈν”„λΌ ν™μ©
```

---

## π’» CDN μ„¤μ • μμ‹

### Cloudflare μ„¤μ •

```
1. DNS μ„¤μ •:
example.com β†’ Cloudflare Nameserver

2. Cloudflareμ—μ„:
- SSL/TLS μ„¤μ •
- μΊμ‹± κ·μΉ™ μ„¤μ •
- μ••μ¶• ν™μ„±ν™”

3. μλ™:
- λ¨λ“  νΈλν”½μ΄ Cloudflare κ²½μ 
- μ •μ  μ½ν…μΈ  μλ™ μΊμ‹±
```

### AWS CloudFront μ„¤μ •

```javascript
// CloudFront Distribution μƒμ„±
{
  "Origins": [{
    "DomainName": "example.s3.amazonaws.com",
    "Id": "S3-example"
  }],
  "DefaultCacheBehavior": {
    "TargetOriginId": "S3-example",
    "ViewerProtocolPolicy": "redirect-to-https",
    "AllowedMethods": ["GET", "HEAD"],
    "CachedMethods": ["GET", "HEAD"],
    "Compress": true,
    "DefaultTTL": 86400  // 1μΌ
  }
}
```

### Cache-Control ν—¤λ”

```
μ •μ  λ¦¬μ†μ¤:
Cache-Control: public, max-age=31536000, immutable
β†’ 1λ…„ μΊμ‹±, λ³€κ²½ μ• λ¨

HTML:
Cache-Control: public, max-age=3600, must-revalidate
β†’ 1μ‹κ°„ μΊμ‹±, μ¬κ²€μ¦ ν•„μ”

λ™μ  μ½ν…μΈ :
Cache-Control: no-cache, no-store, must-revalidate
β†’ μΊμ‹± μ• ν•¨
```

---

## π“ CDN μ„±λ¥ μΈ΅μ •

### μ£Όμ” μ§€ν‘

```
1. Hit Ratio (μΊμ‹ μ μ¤‘λ¥ ):
   μΊμ‹ Hit / μ „μ²΄ μ”μ²­
   λ©ν‘: 90% μ΄μƒ

2. Origin λ¶€ν•:
   Origin μ”μ²­ μ
   λ©ν‘: μµμ†ν™”

3. μ‘λ‹µ μ‹κ°„:
   TTFB (Time To First Byte)
   λ©ν‘: <100ms

4. λ€μ—­ν­ μ μ•½:
   CDNμΌλ΅ μ μ•½λ λ€μ—­ν­
   λ©ν‘: 70% μ΄μƒ
```

---

## π’¬ λ©΄μ ‘ λ‹µλ³€ μμ‹

### μ§§μ€ λ‹µλ³€
```
CDNμ€ μ „ μ„Έκ³„μ— λ¶„μ‚°λ μΊμ‹ μ„λ²„ λ„¤νΈμ›ν¬μ…λ‹λ‹¤.

λ™μ‘:
1. μ‚¬μ©μ μ”μ²­
2. κ°€μ¥ κ°€κΉμ΄ CDN μ„λ²„ μ—°κ²°
3. μΊμ‹ μμΌλ©΄ μ¦‰μ‹ μ‘λ‹µ (λΉ λ¦„)
4. μ—†μΌλ©΄ Originμ—μ„ κ°€μ Έμ™€ μΊμ‹±

μ¥μ :
- λΉ λ¥Έ μ†λ„
- μ„λ²„ λ¶€ν• κ°μ†
- DDoS λ°©μ–΄

μ‚¬μ©:
- μ΄λ―Έμ§€, λ™μμƒ
- CSS, JavaScript
```

### μƒμ„Έ λ‹µλ³€
```
CDN (Content Delivery Network):

μ •μ:
μ „ μ„Έκ³„μ— λ¶„μ‚°λ μ„λ²„ λ„¤νΈμ›ν¬λ΅
μ½ν…μΈ λ¥Ό μ‚¬μ©μμ™€ κ°€κΉμ΄ κ³³μ—μ„ μ κ³µ

κµ¬μ„±:
1. Origin Server: μ›λ³Έ μ½ν…μΈ  μ„λ²„
2. Edge Server: μ „ μ„Έκ³„ μΊμ‹ μ„λ²„
3. DNS: κ°€μ¥ κ°€κΉμ΄ μ„λ²„ μ•λ‚΄

λ™μ‘ κ³Όμ •:

1. DNS μ΅°ν:
   - example.com μ”μ²­
   - κ°€μ¥ κ°€κΉμ΄ CDN μ„λ²„ IP λ°ν™
   - μ§€λ¦¬μ  μ„μΉ, λ„¤νΈμ›ν¬ μ§€μ—° κ³ λ ¤

2. Cache Hit (μΊμ‹ μμ):
   - Edge Serverμ— μ½ν…μΈ  μμ
   - μ¦‰μ‹ μ‘λ‹µ (λ§¤μ° λΉ λ¦„) β…
   - Origin μ ‘μ† λ¶ν•„μ”

3. Cache Miss (μΊμ‹ μ—†μ):
   - Edge Serverμ— μ½ν…μΈ  μ—†μ
   - Origin Serverμ—μ„ κ°€μ Έμ΄
   - Edge Serverμ— μΊμ‹±
   - μ‚¬μ©μμ—κ² μ‘λ‹µ
   - λ‹¤μ μ”μ²­μ€ Cache Hit

μ£Όμ” κΈ°λ¥:

1. μ§€λ¦¬μ  λ¶„μ‚°:
   - μ „ μ„Έκ³„ μλ°± κ° μ„λ²„
   - μ‚¬μ©μμ™€ κ°€κΉμ΄ κ³³μ—μ„ μ κ³µ
   - λ‚®μ€ μ§€μ—°μ‹κ°„

2. μΊμ‹±:
   - μ •μ  μ½ν…μΈ  μ €μ¥
   - μ΄λ―Έμ§€, λ™μμƒ, CSS, JS
   - TTL μ„¤μ •μΌλ΅ μ ν¨ μ‹κ°„ κ΄€λ¦¬

3. λ΅λ“ λ°Έλ°μ‹±:
   - μ—¬λ¬ μ„λ²„μ— νΈλν”½ λ¶„μ‚°
   - κ³ κ°€μ©μ„±
   - μ¥μ•  λ€μ‘

4. λ³΄μ•:
   - DDoS λ°©μ–΄ (νΈλν”½ λ¶„μ‚°)
   - SSL/TLS μ§€μ›
   - Origin Server λ³΄νΈ

5. μµμ ν™”:
   - μλ™ μ••μ¶• (Gzip, Brotli)
   - μ΄λ―Έμ§€ μµμ ν™” (WebP λ³€ν™)
   - μλ™ ν¬κΈ° μ΅°μ •

μ¥μ :
β… λΉ λ¥Έ λ΅λ”© μ†λ„ (λ¬Όλ¦¬μ  κ±°λ¦¬ κ°μ†)
β… μ„λ²„ λ¶€ν• κ°μ† (Origin λ³΄νΈ)
β… λ€μ—­ν­ μ μ•½ (μΊμ‹±)
β… κ³ κ°€μ©μ„± (λ¶„μ‚° κµ¬μ΅°)
β… DDoS λ°©μ–΄
β… κΈ€λ΅λ² ν™•μ¥ μ©μ΄

λ‹¨μ :
β λΉ„μ© (νΈλν”½ κΈ°λ° κ³ΌκΈ)
β μΊμ‹ λ¬΄ν¨ν™” λ³µμ΅
β λ™μ  μ½ν…μΈ μ—λ” ν¨κ³Ό μ μ

CDN μΆ…λ¥:

Push CDN:
- κ°λ°μκ°€ μ½ν…μΈ  μ—…λ΅λ“
- λ¨λ“  μ„λ²„μ— λ³µμ 
- λ³€κ²½ μ μ€ μ½ν…μΈ 

Pull CDN (μΌλ°μ ):
- μ”μ²­ μ‹ μλ™ μΊμ‹±
- μλ™ν™”
- λ€λ¶€λ¶„μ μ›Ήμ‚¬μ΄νΈ

μ£Όμ” μ κ³µμ:
- Cloudflare (λ¬΄λ£ ν”λ)
- AWS CloudFront
- Akamai
- Fastly
- Google Cloud CDN

μ‹¤λ¬΄ ν™μ©:
- μ›Ήμ‚¬μ΄νΈ (μ •μ  λ¦¬μ†μ¤)
- λ™μμƒ μ¤νΈλ¦¬λ° (Netflix, YouTube)
- μ†ν”„νΈμ›¨μ–΄ λ°°ν¬ (npm, Docker Hub)
- κ²μ„ (λ€μ©λ‰ λ‹¤μ΄λ΅λ“)
- API (μ—£μ§€ μ»΄ν“¨ν…)

μ„¤μ •:
- DNSλ¥Ό CDNμΌλ΅ λ³€κ²½
- Origin Server μ§€μ •
- μΊμ‹± κ·μΉ™