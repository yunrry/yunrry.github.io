<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>GROUP BY &amp; 집계함수 - Second Brain</title>
<meta name="description" content="2026년 목표: 개발로 월급받기추가 정보 없음">


  <meta name="author" content="yunYoung e">
  


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Second Brain">
<meta property="og:title" content="GROUP BY &amp; 집계함수">
<meta property="og:url" content="http://localhost:4000/assets/contents/cs/group-by/">


  <meta property="og:description" content="2026년 목표: 개발로 월급받기추가 정보 없음">












<link rel="canonical" href="http://localhost:4000/assets/contents/cs/group-by/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "yunYoung e",
      "url": "http://localhost:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Second Brain Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>


  
    <script src="/assets/js/custom.js"></script>
  


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--default">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Second Brain
          <span class="site-subtitle">뇌정리노트</span>
        </a>
        <ul class="visible-links"></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      <h1 id="group-by--집계함수">GROUP BY &amp; 집계함수</h1>

<h2 id="-집계함수-aggregate-functions">📌 집계함수 (Aggregate Functions)</h2>

<h3 id="1-count---개수-세기">1. COUNT() - 개수 세기</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 전체 행 개수</span>
<span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">employees</span><span class="p">;</span>
<span class="c1">-- 결과: 100</span>

<span class="c1">-- 특정 컬럼의 NULL이 아닌 값 개수</span>
<span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="n">commission</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">employees</span><span class="p">;</span>
<span class="c1">-- 결과: 35 (commission이 NULL인 직원 제외)</span>

<span class="c1">-- 중복 제거한 개수</span>
<span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">department</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">employees</span><span class="p">;</span>
<span class="c1">-- 결과: 5 (중복된 부서명 제외)</span>

<span class="c1">-- 조건부 카운트</span>
<span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">employees</span> <span class="k">WHERE</span> <span class="n">salary</span> <span class="o">&gt;=</span> <span class="mi">50000</span><span class="p">;</span>
<span class="c1">-- 결과: 42</span>
</code></pre></div></div>

<p><strong>COUNT(*) vs COUNT(column) 차이점:</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">COUNT(*)</code>: 모든 행을 센다 (NULL 포함)</li>
  <li><code class="language-plaintext highlighter-rouge">COUNT(column)</code>: NULL 값을 제외하고 센다</li>
  <li><code class="language-plaintext highlighter-rouge">COUNT(DISTINCT column)</code>: 중복과 NULL을 제외하고 센다</li>
</ul>

<hr />

<h3 id="2-sum---합계">2. SUM() - 합계</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 전체 급여 합계</span>
<span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">employees</span><span class="p">;</span>
<span class="c1">-- 결과: 4850000</span>

<span class="c1">-- 특정 부서의 급여 합계</span>
<span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">employees</span> <span class="k">WHERE</span> <span class="n">department</span> <span class="o">=</span> <span class="s1">'IT'</span><span class="p">;</span>
<span class="c1">-- 결과: 1250000</span>

<span class="c1">-- NULL 값은 자동으로 무시됨</span>
<span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="n">commission</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">employees</span><span class="p">;</span>
<span class="c1">-- commission이 NULL인 행은 계산에서 제외</span>

<span class="c1">-- 조건부 합계 (CASE 활용)</span>
<span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">gender</span> <span class="o">=</span> <span class="s1">'M'</span> <span class="k">THEN</span> <span class="n">salary</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="n">male_salary_sum</span>
<span class="k">FROM</span> <span class="n">employees</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>주의사항:</strong></p>

<ul>
  <li>SUM()은 숫자형 데이터에만 사용 가능</li>
  <li>NULL 값은 자동으로 무시됨 (0으로 취급하지 않음)</li>
  <li>모든 값이 NULL이면 결과도 NULL</li>
</ul>

<hr />

<h3 id="3-avg---평균">3. AVG() - 평균</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 전체 평균 급여</span>
<span class="k">SELECT</span> <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">employees</span><span class="p">;</span>
<span class="c1">-- 결과: 48500.00</span>

<span class="c1">-- 소수점 자리수 조절</span>
<span class="k">SELECT</span> <span class="n">ROUND</span><span class="p">(</span><span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">employees</span><span class="p">;</span>
<span class="c1">-- 결과: 48500.00</span>

<span class="c1">-- NULL 제외하고 평균 계산</span>
<span class="k">SELECT</span> <span class="k">AVG</span><span class="p">(</span><span class="n">commission</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">employees</span><span class="p">;</span>
<span class="c1">-- commission이 NULL인 직원은 평균 계산에서 제외</span>

<span class="c1">-- 평균보다 높은 급여를 받는 직원</span>
<span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">salary</span> 
<span class="k">FROM</span> <span class="n">employees</span> 
<span class="k">WHERE</span> <span class="n">salary</span> <span class="o">&gt;</span> <span class="p">(</span><span class="k">SELECT</span> <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">employees</span><span class="p">);</span>
</code></pre></div></div>

<p><strong>AVG() 계산 방식:</strong></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 예시 데이터</span>
<span class="c1">-- salary: 50000, 60000, NULL, 40000</span>

<span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">50000</span> <span class="o">+</span> <span class="mi">60000</span> <span class="o">+</span> <span class="mi">40000</span><span class="p">)</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">=</span> <span class="mi">50000</span>
<span class="c1">-- NULL은 개수에서도 제외됨 (4가 아닌 3으로 나눔)</span>
</code></pre></div></div>

<hr />

<h3 id="4-max--min---최대값--최소값">4. MAX() / MIN() - 최대값 / 최소값</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 최고 급여</span>
<span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">employees</span><span class="p">;</span>
<span class="c1">-- 결과: 95000</span>

<span class="c1">-- 최저 급여</span>
<span class="k">SELECT</span> <span class="k">MIN</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">employees</span><span class="p">;</span>
<span class="c1">-- 결과: 28000</span>

<span class="c1">-- 최고 급여를 받는 직원 정보 (서브쿼리 활용)</span>
<span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">salary</span> 
<span class="k">FROM</span> <span class="n">employees</span> 
<span class="k">WHERE</span> <span class="n">salary</span> <span class="o">=</span> <span class="p">(</span><span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">employees</span><span class="p">);</span>

<span class="c1">-- 부서별 최고/최저 급여 차이</span>
<span class="k">SELECT</span> 
    <span class="n">department</span><span class="p">,</span>
    <span class="k">MAX</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="o">-</span> <span class="k">MIN</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="n">salary_gap</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span><span class="p">;</span>

<span class="c1">-- 날짜형에도 사용 가능</span>
<span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="n">hire_date</span><span class="p">)</span> <span class="k">AS</span> <span class="n">latest_hire</span> <span class="k">FROM</span> <span class="n">employees</span><span class="p">;</span>
<span class="c1">-- 결과: 2024-12-15 (가장 최근 입사일)</span>

<span class="c1">-- 문자열에도 사용 가능 (사전순)</span>
<span class="k">SELECT</span> <span class="k">MIN</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">employees</span><span class="p">;</span>
<span class="c1">-- 결과: 'A'로 시작하는 이름 중 가장 앞선 이름</span>
</code></pre></div></div>

<hr />

<h3 id="5-여러-집계함수-동시-사용">5. 여러 집계함수 동시 사용</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> 
    <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="err">총직원수</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">department</span><span class="p">)</span> <span class="k">AS</span> <span class="err">부서수</span><span class="p">,</span>
    <span class="k">SUM</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="err">급여총액</span><span class="p">,</span>
    <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="err">평균급여</span><span class="p">,</span>
    <span class="k">MAX</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="err">최고급여</span><span class="p">,</span>
    <span class="k">MIN</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="err">최저급여</span><span class="p">,</span>
    <span class="k">MAX</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="o">-</span> <span class="k">MIN</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="err">급여차이</span>
<span class="k">FROM</span> <span class="n">employees</span><span class="p">;</span>
</code></pre></div></div>

<p>결과:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>총직원수 | 부서수 | 급여총액  | 평균급여 | 최고급여 | 최저급여 | 급여차이
--------|-------|----------|---------|---------|---------|--------
  100   |   5   | 4850000  |  48500  |  95000  |  28000  |  67000
</code></pre></div></div>

<hr />

<h2 id="-group-by---그룹화">📊 GROUP BY - 그룹화</h2>

<h3 id="1-기본-group-by">1. 기본 GROUP BY</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 부서별 직원 수</span>
<span class="k">SELECT</span> <span class="n">department</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="n">employee_count</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span><span class="p">;</span>
</code></pre></div></div>

<p>결과:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>department | employee_count
-----------|---------------
IT         | 25
HR         | 15
Sales      | 30
Marketing  | 20
Finance    | 10
</code></pre></div></div>

<p><strong>동작 원리:</strong></p>

<ol>
  <li>department 값이 같은 행들을 하나의 그룹으로 묶음</li>
  <li>각 그룹에 대해 COUNT(*) 계산</li>
  <li>그룹당 하나의 결과 행 반환</li>
</ol>

<hr />

<h3 id="2-다중-컬럼-group-by">2. 다중 컬럼 GROUP BY</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 부서별, 직급별 그룹화</span>
<span class="k">SELECT</span> 
    <span class="n">department</span><span class="p">,</span> 
    <span class="k">position</span><span class="p">,</span> 
    <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="n">cnt</span><span class="p">,</span>
    <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="n">avg_sal</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span><span class="p">,</span> <span class="k">position</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">department</span><span class="p">,</span> <span class="k">position</span><span class="p">;</span>
</code></pre></div></div>

<p>결과:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>department | position | cnt | avg_sal
-----------|----------|-----|--------
IT         | Junior   | 10  | 35000
IT         | Senior   | 15  | 65000
HR         | Junior   | 8   | 32000
HR         | Senior   | 7   | 55000
Sales      | Junior   | 18  | 30000
Sales      | Senior   | 12  | 50000
</code></pre></div></div>

<p><strong>그룹화 순서:</strong></p>

<ul>
  <li>먼저 department로 그룹화</li>
  <li>같은 department 내에서 다시 position으로 그룹화</li>
</ul>

<hr />

<h3 id="3-group-by-사용-시-주의사항">3. GROUP BY 사용 시 주의사항</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- ❌ 잘못된 쿼리 (에러 발생)</span>
<span class="k">SELECT</span> <span class="n">department</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>에러 이유:</strong></p>

<ul>
  <li>GROUP BY에 없는 컬럼(name)을 SELECT에 사용</li>
  <li>한 부서에 여러 직원이 있는데, 어떤 name을 출력해야 할지 모호함</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- ✅ 올바른 쿼리 1: 집계함수 사용</span>
<span class="k">SELECT</span> <span class="n">department</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="n">cnt</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span><span class="p">;</span>

<span class="c1">-- ✅ 올바른 쿼리 2: GROUP BY에 포함</span>
<span class="k">SELECT</span> <span class="n">department</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">salary</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">salary</span><span class="p">;</span>

<span class="c1">-- ✅ 올바른 쿼리 3: 서브쿼리로 최고 급여자만 선택</span>
<span class="k">SELECT</span> <span class="n">department</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">salary</span>
<span class="k">FROM</span> <span class="n">employees</span> <span class="n">e1</span>
<span class="k">WHERE</span> <span class="n">salary</span> <span class="o">=</span> <span class="p">(</span>
    <span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> 
    <span class="k">FROM</span> <span class="n">employees</span> <span class="n">e2</span> 
    <span class="k">WHERE</span> <span class="n">e2</span><span class="p">.</span><span class="n">department</span> <span class="o">=</span> <span class="n">e1</span><span class="p">.</span><span class="n">department</span>
<span class="p">);</span>
</code></pre></div></div>

<hr />

<h3 id="4-group-by와-where-함께-사용">4. GROUP BY와 WHERE 함께 사용</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 급여가 40000 이상인 직원들만 부서별로 그룹화</span>
<span class="k">SELECT</span> 
    <span class="n">department</span><span class="p">,</span> 
    <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="n">high_earners</span><span class="p">,</span>
    <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="n">avg_salary</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">WHERE</span> <span class="n">salary</span> <span class="o">&gt;=</span> <span class="mi">40000</span>  <span class="c1">-- 그룹화 전 필터링</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span><span class="p">;</span>
</code></pre></div></div>

<p><strong>실행 순서:</strong></p>

<ol>
  <li>WHERE 조건으로 행 필터링 (salary &gt;= 40000)</li>
  <li>필터링된 결과를 department로 그룹화</li>
  <li>각 그룹에 대해 집계 계산</li>
</ol>

<hr />

<h2 id="-having---그룹-필터링">🔍 HAVING - 그룹 필터링</h2>

<h3 id="1-having-기본-사용법">1. HAVING 기본 사용법</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 평균 급여가 50000 이상인 부서만 조회</span>
<span class="k">SELECT</span> 
    <span class="n">department</span><span class="p">,</span> 
    <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="n">avg_salary</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="n">emp_count</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span>
<span class="k">HAVING</span> <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">50000</span><span class="p">;</span>
</code></pre></div></div>

<p>결과:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>department | avg_salary | emp_count
-----------|------------|----------
IT         | 55000      | 25
Finance    | 62000      | 10
</code></pre></div></div>

<hr />

<h3 id="2-where-vs-having-비교">2. WHERE vs HAVING 비교</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- WHERE: 그룹화 전 행 필터링</span>
<span class="k">SELECT</span> <span class="n">department</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="n">cnt</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">WHERE</span> <span class="n">salary</span> <span class="o">&gt;=</span> <span class="mi">50000</span>  <span class="c1">-- 개별 행 조건</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span><span class="p">;</span>

<span class="c1">-- HAVING: 그룹화 후 그룹 필터링</span>
<span class="k">SELECT</span> <span class="n">department</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="n">cnt</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span>
<span class="k">HAVING</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">10</span><span class="p">;</span>  <span class="c1">-- 그룹 조건</span>
</code></pre></div></div>

<p><strong>차이점 정리:</strong></p>

<table>
  <thead>
    <tr>
      <th>구분</th>
      <th>WHERE</th>
      <th>HAVING</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>적용 시점</td>
      <td>그룹화 전</td>
      <td>그룹화 후</td>
    </tr>
    <tr>
      <td>대상</td>
      <td>개별 행</td>
      <td>그룹</td>
    </tr>
    <tr>
      <td>집계함수</td>
      <td>사용 불가</td>
      <td>사용 가능</td>
    </tr>
    <tr>
      <td>실행 순서</td>
      <td>2번째</td>
      <td>4번째</td>
    </tr>
  </tbody>
</table>

<hr />

<h3 id="3-where와-having-함께-사용">3. WHERE와 HAVING 함께 사용</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 2020년 이후 입사자 중, 부서별 평균 급여가 45000 이상인 부서</span>
<span class="k">SELECT</span> 
    <span class="n">department</span><span class="p">,</span> 
    <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="n">emp_count</span><span class="p">,</span>
    <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="n">avg_salary</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">WHERE</span> <span class="n">hire_date</span> <span class="o">&gt;=</span> <span class="s1">'2020-01-01'</span>  <span class="c1">-- 개별 행 필터링 (그룹화 전)</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span>
<span class="k">HAVING</span> <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">45000</span><span class="p">;</span>     <span class="c1">-- 그룹 필터링 (그룹화 후)</span>
</code></pre></div></div>

<p><strong>실행 순서:</strong></p>

<ol>
  <li>FROM employees</li>
  <li>WHERE hire_date &gt;= ‘2020-01-01’ (행 필터링)</li>
  <li>GROUP BY department (그룹화)</li>
  <li>HAVING AVG(salary) &gt;= 45000 (그룹 필터링)</li>
  <li>SELECT (결과 출력)</li>
</ol>

<hr />

<h3 id="4-having에서-다양한-조건-사용">4. HAVING에서 다양한 조건 사용</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 직원이 5명 이상이고, 최고 급여가 80000 이상인 부서</span>
<span class="k">SELECT</span> 
    <span class="n">department</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="n">emp_count</span><span class="p">,</span>
    <span class="k">MAX</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="n">max_salary</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span>
<span class="k">HAVING</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">5</span> <span class="k">AND</span> <span class="k">MAX</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">80000</span><span class="p">;</span>

<span class="c1">-- 급여 표준편차가 큰 부서 (급여 편차가 심한 부서)</span>
<span class="k">SELECT</span> 
    <span class="n">department</span><span class="p">,</span>
    <span class="n">STDDEV</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="n">salary_stddev</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span>
<span class="k">HAVING</span> <span class="n">STDDEV</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">15000</span><span class="p">;</span>

<span class="c1">-- 급여 합계가 상위 3개 부서</span>
<span class="k">SELECT</span> 
    <span class="n">department</span><span class="p">,</span>
    <span class="k">SUM</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="n">total_salary</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="k">SUM</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">DESC</span>
<span class="k">LIMIT</span> <span class="mi">3</span><span class="p">;</span>
</code></pre></div></div>

<hr />

<h2 id="-실전-예제">🎯 실전 예제</h2>

<h3 id="예제-1-부서별-급여-분석">예제 1: 부서별 급여 분석</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> 
    <span class="n">department</span> <span class="k">AS</span> <span class="err">부서</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="err">직원수</span><span class="p">,</span>
    <span class="n">ROUND</span><span class="p">(</span><span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span> <span class="k">AS</span> <span class="err">평균급여</span><span class="p">,</span>
    <span class="k">MAX</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="err">최고급여</span><span class="p">,</span>
    <span class="k">MIN</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="err">최저급여</span><span class="p">,</span>
    <span class="k">MAX</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="o">-</span> <span class="k">MIN</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="err">급여편차</span><span class="p">,</span>
    <span class="k">SUM</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="err">급여총액</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span>
<span class="k">HAVING</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">5</span>  <span class="c1">-- 5명 이상인 부서만</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="err">평균급여</span> <span class="k">DESC</span><span class="p">;</span>
</code></pre></div></div>

<hr />

<h3 id="예제-2-입사년도별-부서별-통계">예제 2: 입사년도별, 부서별 통계</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> 
    <span class="nb">YEAR</span><span class="p">(</span><span class="n">hire_date</span><span class="p">)</span> <span class="k">AS</span> <span class="err">입사년도</span><span class="p">,</span>
    <span class="n">department</span> <span class="k">AS</span> <span class="err">부서</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="err">입사자수</span><span class="p">,</span>
    <span class="n">ROUND</span><span class="p">(</span><span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span> <span class="k">AS</span> <span class="err">평균초봉</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">WHERE</span> <span class="n">hire_date</span> <span class="o">&gt;=</span> <span class="s1">'2020-01-01'</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="nb">YEAR</span><span class="p">(</span><span class="n">hire_date</span><span class="p">),</span> <span class="n">department</span>
<span class="k">HAVING</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="err">입사년도</span> <span class="k">DESC</span><span class="p">,</span> <span class="err">부서</span><span class="p">;</span>
</code></pre></div></div>

<hr />

<h3 id="예제-3-성별-직급별-급여-분석">예제 3: 성별, 직급별 급여 분석</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> 
    <span class="n">gender</span> <span class="k">AS</span> <span class="err">성별</span><span class="p">,</span>
    <span class="k">position</span> <span class="k">AS</span> <span class="err">직급</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="err">인원</span><span class="p">,</span>
    <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="err">평균급여</span><span class="p">,</span>
    <span class="k">MIN</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="err">최저급여</span><span class="p">,</span>
    <span class="k">MAX</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="err">최고급여</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">gender</span><span class="p">,</span> <span class="k">position</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">gender</span><span class="p">,</span> <span class="k">position</span><span class="p">;</span>
</code></pre></div></div>

<p>결과:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>성별 | 직급   | 인원 | 평균급여 | 최저급여 | 최고급여
----|--------|------|---------|---------|--------
F   | Junior | 25   | 32000   | 28000   | 38000
F   | Senior | 20   | 58000   | 45000   | 75000
M   | Junior | 30   | 33000   | 28000   | 40000
M   | Senior | 25   | 62000   | 48000   | 95000
</code></pre></div></div>

<hr />

<h3 id="예제-4-조건부-집계-case-활용">예제 4: 조건부 집계 (CASE 활용)</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 급여 구간별 직원 수</span>
<span class="k">SELECT</span> 
    <span class="n">department</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="err">총인원</span><span class="p">,</span>
    <span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">salary</span> <span class="o">&lt;</span> <span class="mi">40000</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="err">저급여</span><span class="p">,</span>
    <span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">salary</span> <span class="k">BETWEEN</span> <span class="mi">40000</span> <span class="k">AND</span> <span class="mi">60000</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="err">중급여</span><span class="p">,</span>
    <span class="k">SUM</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">salary</span> <span class="o">&gt;</span> <span class="mi">60000</span> <span class="k">THEN</span> <span class="mi">1</span> <span class="k">ELSE</span> <span class="mi">0</span> <span class="k">END</span><span class="p">)</span> <span class="k">AS</span> <span class="err">고급여</span><span class="p">,</span>
    <span class="n">ROUND</span><span class="p">(</span><span class="k">AVG</span><span class="p">(</span><span class="k">CASE</span> <span class="k">WHEN</span> <span class="n">salary</span> <span class="o">&lt;</span> <span class="mi">40000</span> <span class="k">THEN</span> <span class="n">salary</span> <span class="k">END</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span> <span class="k">AS</span> <span class="err">저급여평균</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span><span class="p">;</span>
</code></pre></div></div>

<hr />

<h3 id="예제-5-서브쿼리와-group-by">예제 5: 서브쿼리와 GROUP BY</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 각 부서의 평균 급여보다 높은 급여를 받는 직원 수</span>
<span class="k">SELECT</span> 
    <span class="n">e</span><span class="p">.</span><span class="n">department</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="err">평균이상직원수</span>
<span class="k">FROM</span> <span class="n">employees</span> <span class="n">e</span>
<span class="k">WHERE</span> <span class="n">e</span><span class="p">.</span><span class="n">salary</span> <span class="o">&gt;</span> <span class="p">(</span>
    <span class="k">SELECT</span> <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> 
    <span class="k">FROM</span> <span class="n">employees</span> 
    <span class="k">WHERE</span> <span class="n">department</span> <span class="o">=</span> <span class="n">e</span><span class="p">.</span><span class="n">department</span>
<span class="p">)</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">e</span><span class="p">.</span><span class="n">department</span><span class="p">;</span>
</code></pre></div></div>

<hr />

<h2 id="-고급-활용">💡 고급 활용</h2>

<h3 id="1-rollup---소계와-총계">1. ROLLUP - 소계와 총계</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- 부서별 소계 + 전체 총계</span>
<span class="k">SELECT</span> 
    <span class="n">department</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="n">cnt</span><span class="p">,</span>
    <span class="k">SUM</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="n">total</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span> <span class="k">WITH</span> <span class="k">ROLLUP</span><span class="p">;</span>
</code></pre></div></div>

<p>결과:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>department | cnt | total
-----------|-----|--------
IT         | 25  | 1375000
HR         | 15  | 675000
Sales      | 30  | 1350000
Marketing  | 20  | 900000
Finance    | 10  | 550000
NULL       | 100 | 4850000  ← 총계
</code></pre></div></div>

<hr />

<h3 id="2-윈도우-함수와-비교">2. 윈도우 함수와 비교</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- GROUP BY: 그룹당 하나의 행</span>
<span class="k">SELECT</span> <span class="n">department</span><span class="p">,</span> <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="n">avg_salary</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span><span class="p">;</span>
<span class="c1">-- 결과: 5개 행 (부서 수만큼)</span>

<span class="c1">-- 윈도우 함수: 모든 행 유지</span>
<span class="k">SELECT</span> 
    <span class="n">name</span><span class="p">,</span> 
    <span class="n">department</span><span class="p">,</span> 
    <span class="n">salary</span><span class="p">,</span>
    <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="n">OVER</span> <span class="p">(</span><span class="k">PARTITION</span> <span class="k">BY</span> <span class="n">department</span><span class="p">)</span> <span class="k">AS</span> <span class="n">dept_avg</span>
<span class="k">FROM</span> <span class="n">employees</span><span class="p">;</span>
<span class="c1">-- 결과: 100개 행 (전체 직원 수만큼)</span>
</code></pre></div></div>

<hr />

<h3 id="3-having에서-별칭alias-사용-불가">3. HAVING에서 별칭(Alias) 사용 불가</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- ❌ 에러 발생</span>
<span class="k">SELECT</span> 
    <span class="n">department</span><span class="p">,</span> 
    <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="n">avg_sal</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span>
<span class="k">HAVING</span> <span class="n">avg_sal</span> <span class="o">&gt;</span> <span class="mi">50000</span><span class="p">;</span>  <span class="c1">-- 별칭 사용 불가</span>

<span class="c1">-- ✅ 올바른 방법</span>
<span class="k">SELECT</span> 
    <span class="n">department</span><span class="p">,</span> 
    <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="n">avg_sal</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span>
<span class="k">HAVING</span> <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">50000</span><span class="p">;</span>  <span class="c1">-- 원본 식 사용</span>
</code></pre></div></div>

<hr />

<h2 id="-sql-실행-순서-중요">📝 SQL 실행 순서 (중요!)</h2>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">department</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="n">cnt</span>    <span class="c1">-- 5. 결과 출력</span>
<span class="k">FROM</span> <span class="n">employees</span>                        <span class="c1">-- 1. 테이블 선택</span>
<span class="k">WHERE</span> <span class="n">salary</span> <span class="o">&gt;=</span> <span class="mi">40000</span>                 <span class="c1">-- 2. 행 필터링</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span>                   <span class="c1">-- 3. 그룹화</span>
<span class="k">HAVING</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">10</span>                 <span class="c1">-- 4. 그룹 필터링</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">cnt</span> <span class="k">DESC</span>                     <span class="c1">-- 6. 정렬</span>
<span class="k">LIMIT</span> <span class="mi">3</span><span class="p">;</span>                              <span class="c1">-- 7. 행 수 제한</span>
</code></pre></div></div>

<p><strong>실행 순서:</strong></p>

<ol>
  <li>FROM - 테이블 선택</li>
  <li>WHERE - 개별 행 필터링</li>
  <li>GROUP BY - 그룹화</li>
  <li>HAVING - 그룹 필터링</li>
  <li>SELECT - 컬럼 선택 및 집계</li>
  <li>ORDER BY - 정렬</li>
  <li>LIMIT - 행 수 제한</li>
</ol>

<hr />

<h2 id="️-자주-하는-실수">⚠️ 자주 하는 실수</h2>

<h3 id="1-group-by-없이-집계함수-사용">1. GROUP BY 없이 집계함수 사용</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- ❌ 에러 (MySQL 5.7 이상)</span>
<span class="k">SELECT</span> <span class="n">department</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">employees</span><span class="p">;</span>

<span class="c1">-- ✅ 올바른 방법</span>
<span class="k">SELECT</span> <span class="n">department</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="2-where에서-집계함수-사용">2. WHERE에서 집계함수 사용</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- ❌ 에러</span>
<span class="k">SELECT</span> <span class="n">department</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">WHERE</span> <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">50000</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span><span class="p">;</span>

<span class="c1">-- ✅ HAVING 사용</span>
<span class="k">SELECT</span> <span class="n">department</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span>
<span class="k">HAVING</span> <span class="k">AVG</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">50000</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="3-select의-모든-컬럼이-group-by에-없음">3. SELECT의 모든 컬럼이 GROUP BY에 없음</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">-- ❌ 에러</span>
<span class="k">SELECT</span> <span class="n">department</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span><span class="p">;</span>

<span class="c1">-- ✅ 집계함수 사용 또는 GROUP BY에 추가</span>
<span class="k">SELECT</span> <span class="n">department</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="k">AS</span> <span class="n">name_count</span>
<span class="k">FROM</span> <span class="n">employees</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">department</span><span class="p">;</span>
</code></pre></div></div>

<hr />

<h2 id="-실전-연습-문제">🎓 실전 연습 문제</h2>

<h3 id="문제-1">문제 1</h3>

<p>부서별로 평균 급여가 가장 높은 상위 3개 부서를 조회하세요.</p>

<details>
<summary>정답 보기</summary>

```sql
SELECT 
    department,
    ROUND(AVG(salary), 0) AS avg_salary
FROM employees
GROUP BY department
ORDER BY avg_salary DESC
LIMIT 3;
```

</details>

<h3 id="문제-2">문제 2</h3>

<p>2020년 이후 입사자 중, 부서별 인원이 5명 이상인 부서의 평균 급여를 조회하세요.</p>

<details>
<summary>정답 보기</summary>

```sql
SELECT 
    department,
    COUNT(*) AS emp_count,
    AVG(salary) AS avg_salary
FROM employees
WHERE hire_date &gt;= '2020-01-01'
GROUP BY department
HAVING COUNT(*) &gt;= 5;
```

</details>

<h3 id="문제-3">문제 3</h3>

<p>직급별로 남성과 여성의 평균 급여 차이를 조회하세요.</p>

<details>
<summary>정답 보기</summary>

```sql
SELECT 
    position,
    AVG(CASE WHEN gender = 'M' THEN salary END) AS male_avg,
    AVG(CASE WHEN gender = 'F' THEN salary END) AS female_avg,
    AVG(CASE WHEN gender = 'M' THEN salary END) - 
    AVG(CASE WHEN gender = 'F' THEN salary END) AS gap
FROM employees
GROUP BY position;
```

</details>

<hr />

<p>이 내용을 바탕으로 실제 SQL 쿼리를 많이 작성해보세요. 다음 주제(네트워크, 자료구조 등)도 필요하시면 말씀해주세요!​​​​​​​​​​​​​​​​</p>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 yunYoung e. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
