<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>FLIK: ì—¬í–‰ì½”ìŠ¤ ì¶”ì²œ ì„œë¹„ìŠ¤ ê°œë°œê¸° - (ë°±ì—”ë“œ 5í¸) - Second Brain</title>
<meta name="description" content="2026ë…„ ëª©í‘œ: ê°œë°œë¡œ ì›”ê¸‰ë°›ê¸°ì¶”ê°€ ì •ë³´ ì—†ìŒ">


  <meta name="author" content="yunYoung e">
  


<meta property="og:type" content="website">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Second Brain">
<meta property="og:title" content="FLIK: ì—¬í–‰ì½”ìŠ¤ ì¶”ì²œ ì„œë¹„ìŠ¤ ê°œë°œê¸° - (ë°±ì—”ë“œ 5í¸)">
<meta property="og:url" content="http://0.0.0.0:4000/assets/contents/dev/backend/flik-05/">


  <meta property="og:description" content="2026ë…„ ëª©í‘œ: ê°œë°œë¡œ ì›”ê¸‰ë°›ê¸°ì¶”ê°€ ì •ë³´ ì—†ìŒ">












<link rel="canonical" href="http://0.0.0.0:4000/assets/contents/dev/backend/flik-05/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "yunYoung e",
      "url": "http://0.0.0.0:4000/"
    
  }
</script>







<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Second Brain Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>


  
    <script src="/assets/js/custom.js"></script>
  


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--default">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">
          Second Brain
          <span class="site-subtitle">ë‡Œì •ë¦¬ë…¸íŠ¸</span>
        </a>
        <ul class="visible-links"></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      <h1 id="flik-ì—¬í–‰ì½”ìŠ¤-ì¶”ì²œ-ì„œë¹„ìŠ¤-ê°œë°œê¸°---ë°±ì—”ë“œ-5í¸">FLIK: ì—¬í–‰ì½”ìŠ¤ ì¶”ì²œ ì„œë¹„ìŠ¤ ê°œë°œê¸° - (ë°±ì—”ë“œ 5í¸)</h1>
<blockquote>
  <p><strong>ì„ë² ë”© í”„ë¡œì„¸ìŠ¤ ì„¤ê³„ì™€ Postgres ë²¡í„° ì €ì¥ êµ¬ì¡°</strong></p>
</blockquote>

<hr />

<h2 id="ëª©í‘œ">ëª©í‘œ</h2>
<p>ì‚¬ìš©ìê°€ ì¥ì†Œ(Spot)ë¥¼ ì €ì¥í•  ë•Œ,
ê·¸ ì¥ì†Œì˜ <strong>ì„¤ëª…(description)</strong> ì„ OpenAI ëª¨ë¸ë¡œ ë¶„ì„í•˜ê³ ,<br />
í•µì‹¬ í‚¤ì›Œë“œë¥¼ ì¶”ì¶œí•œ ë’¤ ì´ë¥¼ <strong>ë²¡í„° ì„ë² ë”©(Embedding)</strong> ìœ¼ë¡œ ë³€í™˜í•˜ì—¬<br />
PostgreSQL DBì— ì €ì¥í•˜ëŠ” ì „ì²´ í”„ë¡œì„¸ìŠ¤ë¥¼ ì„¤ê³„í•œë‹¤.</p>

<hr />

<h2 id="ì‹œìŠ¤í…œ-ê°œìš”">ì‹œìŠ¤í…œ ê°œìš”</h2>

<blockquote>
  <p>â€œì‚¬ìš©ìê°€ ì €ì¥í•œ ì¥ì†Œë¥¼ ì‹œìŠ¤í…œì´ â€˜ì´í•´â€™í•˜ëŠ” ê³¼ì •â€</p>
</blockquote>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[User Action]
  â†“
(1) Spot ì €ì¥ ìš”ì²­
  â†“
(2) description í…ìŠ¤íŠ¸ ë¶„ì„ (LLM)
  â†“
(3) í‚¤ì›Œë“œ ì¶”ì¶œ
  â†“
(4) Embedding API í˜¸ì¶œ
  â†“
(5) ì„ë² ë”© ë²¡í„° ìƒì„±
  â†“
(6) PostgreSQLì— ë²¡í„° ì €ì¥
</code></pre></div></div>

<hr />

<h2 id="ì„ë² ë”©-í”„ë¡œì„¸ìŠ¤-ìƒì„¸">ì„ë² ë”© í”„ë¡œì„¸ìŠ¤ ìƒì„¸</h2>

<h3 id="-í‚¤ì›Œë“œ-ì¶”ì¶œ-ë‹¨ê³„--openai-llm">âŠ í‚¤ì›Œë“œ ì¶”ì¶œ ë‹¨ê³„ â€” OpenAI LLM</h3>

<ul>
  <li>ëª¨ë¸: <code class="language-plaintext highlighter-rouge">gpt-4o-mini</code> (í…ìŠ¤íŠ¸ ë¶„ì„ ì „ìš©)</li>
  <li>ì…ë ¥: <code class="language-plaintext highlighter-rouge">spot.description</code></li>
  <li>ì¶œë ¥: í•µì‹¬ í‚¤ì›Œë“œ 3~8ê°œ JSON ë°°ì—´ í˜•ì‹</li>
</ul>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="s2">"ìì—°"</span><span class="p">,</span><span class="w"> </span><span class="s2">"í•œì í•¨"</span><span class="p">,</span><span class="w"> </span><span class="s2">"í˜¸ìˆ˜ë·°"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ì‚°ì±…"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ê°€ì¡±ì—¬í–‰"</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>ì˜ˆì‹œ í”„ë¡¬í”„íŠ¸:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ë‹¹ì‹ ì€ í…ìŠ¤íŠ¸ ìš”ì•½ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
ë‹¤ìŒ ê´€ê´‘ì§€ ì„¤ëª…ì—ì„œ í•µì‹¬ì ì¸ ì˜ë¯¸ë¥¼ ëŒ€í‘œí•˜ëŠ” í‚¤ì›Œë“œ 3~8ê°œë¥¼ ì¶”ì¶œí•˜ì„¸ìš”.
ì¶œë ¥ì€ JSON ë°°ì—´ í˜•ì‹ìœ¼ë¡œë§Œ ë°˜í™˜í•˜ì„¸ìš”.

ì„¤ëª…:
"ë§‘ì€ í˜¸ìˆ˜ì™€ ì‚°ì±…ë¡œê°€ ë§¤ë ¥ì ì¸ ë„ì‹¬ ì† ìì—° ëª…ì†Œì…ë‹ˆë‹¤.
ê°€ì¡± ë‹¨ìœ„ë¡œ ë°©ë¬¸ì´ ë§ìœ¼ë©°, ì¡°ìš©í•œ ë¶„ìœ„ê¸° ì† íë§ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤."
</code></pre></div></div>

<hr />

<h3 id="-ì„ë² ë”©-ë²¡í„°-ìƒì„±--openai-embedding-api">â‹ ì„ë² ë”© ë²¡í„° ìƒì„± â€” OpenAI Embedding API</h3>

<ul>
  <li>ëª¨ë¸: <code class="language-plaintext highlighter-rouge">text-embedding-3-small</code></li>
  <li>ì…ë ¥: ìœ„ì—ì„œ ì¶”ì¶œëœ í‚¤ì›Œë“œ ë¬¸ìì—´ (ê³µë°± ê¸°ì¤€ join)</li>
  <li>ì¶œë ¥: 1536ì°¨ì› ë²¡í„° ë¦¬ìŠ¤íŠ¸</li>
</ul>

<p>ì˜ˆì‹œ:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"embedding"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0.0123</span><span class="p">,</span><span class="w"> </span><span class="mf">-0.0045</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0098</span><span class="p">,</span><span class="w"> </span><span class="err">...</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<hr />

<h3 id="-ë°ì´í„°-ì €ì¥--postgresql--pgvector">âŒ ë°ì´í„° ì €ì¥ â€” PostgreSQL + pgvector</h3>

<p>FLIKì—ì„œëŠ” MariaDBê°€ ì£¼ìš” íŠ¸ëœì­ì…˜ DBì´ì§€ë§Œ,
<strong>ë²¡í„° ê²€ìƒ‰ ìµœì í™”ë¥¼ ìœ„í•´ PostgreSQL (pgvector í™•ì¥)</strong> ì„ ë³„ë„ êµ¬ì„±í•œë‹¤.</p>

<blockquote>
  <p>ğŸ’¡ PostgreSQLì˜ <code class="language-plaintext highlighter-rouge">pgvector</code>ëŠ” OpenAI ì„ë² ë”© ëª¨ë¸ê³¼ ì™„ë²½ í˜¸í™˜ëœë‹¤.</p>
</blockquote>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">spot_embeddings</span> <span class="p">(</span>
    <span class="n">id</span> <span class="n">BIGSERIAL</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
    <span class="n">spot_id</span> <span class="nb">BIGINT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">keywords</span> <span class="nb">TEXT</span><span class="p">[],</span>
    <span class="n">embedding</span> <span class="n">VECTOR</span><span class="p">(</span><span class="mi">1536</span><span class="p">),</span>
    <span class="n">created_at</span> <span class="nb">TIMESTAMP</span> <span class="k">DEFAULT</span> <span class="n">NOW</span><span class="p">(),</span>
    <span class="k">FOREIGN</span> <span class="k">KEY</span> <span class="p">(</span><span class="n">spot_id</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">spots</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div></div>

<hr />

<h2 id="ì „ì²´-ë°ì´í„°-í”Œë¡œìš°">ì „ì²´ ë°ì´í„° í”Œë¡œìš°</h2>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] UserSavedSpotEventListener
     â””â”€â”€ spot ì €ì¥ ì´ë²¤íŠ¸ ìˆ˜ì‹ 
         â””â”€â”€ LLMKeywordExtractor.extractKeywords(description)
              â””â”€â”€ ["ìì—°", "ì‚°ì±…", "ê°€ì¡±ì—¬í–‰"]
         â””â”€â”€ EmbeddingService.createEmbedding(keywords)
              â””â”€â”€ [0.0123, -0.0045, ...]
         â””â”€â”€ SpotEmbeddingRepository.save(spot_id, keywords, embedding)
</code></pre></div></div>

<hr />

<h2 id="ì„œë¹„ìŠ¤-ì½”ë“œ-êµ¬ì¡°-ì˜ˆì‹œ">ì„œë¹„ìŠ¤ ì½”ë“œ êµ¬ì¡° ì˜ˆì‹œ</h2>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpotEmbeddingService</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">LLMKeywordExtractor</span> <span class="n">llmKeywordExtractor</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">EmbeddingClient</span> <span class="n">embeddingClient</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">SpotEmbeddingRepository</span> <span class="n">spotEmbeddingRepository</span><span class="o">;</span>

    <span class="nd">@Async</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">processEmbedding</span><span class="o">(</span><span class="nc">Spot</span> <span class="n">spot</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 1. í‚¤ì›Œë“œ ì¶”ì¶œ</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">keywords</span> <span class="o">=</span> <span class="n">llmKeywordExtractor</span><span class="o">.</span><span class="na">extractKeywords</span><span class="o">(</span><span class="n">spot</span><span class="o">.</span><span class="na">getDescription</span><span class="o">());</span>

        <span class="c1">// 2. ë²¡í„° ì„ë² ë”© ìƒì„±</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">&gt;</span> <span class="n">vector</span> <span class="o">=</span> <span class="n">embeddingClient</span><span class="o">.</span><span class="na">embed</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="s">" "</span><span class="o">,</span> <span class="n">keywords</span><span class="o">));</span>

        <span class="c1">// 3. PostgreSQL ì €ì¥</span>
        <span class="n">spotEmbeddingRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">spot</span><span class="o">.</span><span class="na">getId</span><span class="o">(),</span> <span class="n">keywords</span><span class="o">,</span> <span class="n">vector</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="repository-ì˜ˆì‹œ">Repository ì˜ˆì‹œ</h2>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Repository</span>
<span class="nd">@RequiredArgsConstructor</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SpotEmbeddingRepository</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">(</span><span class="nc">Long</span> <span class="n">spotId</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">keywords</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">&gt;</span> <span class="n">embedding</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"INSERT INTO spot_embeddings (spot_id, keywords, embedding) VALUES (?, ?, ?)"</span><span class="o">;</span>
        <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="n">spotId</span><span class="o">,</span> <span class="n">keywords</span><span class="o">.</span><span class="na">toArray</span><span class="o">(</span><span class="k">new</span> <span class="nc">String</span><span class="o">[</span><span class="mi">0</span><span class="o">]),</span> <span class="n">embedding</span><span class="o">.</span><span class="na">toArray</span><span class="o">(</span><span class="k">new</span> <span class="nc">Double</span><span class="o">[</span><span class="mi">0</span><span class="o">]));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="ì™œ-postgresqlì„-ì„ íƒí–ˆë‚˜">ì™œ PostgreSQLì„ ì„ íƒí–ˆë‚˜</h2>

<table>
  <thead>
    <tr>
      <th>ê¸°ì¤€</th>
      <th>MariaDB</th>
      <th>PostgreSQL (pgvector)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>íŠ¸ëœì­ì…˜ ì²˜ë¦¬</td>
      <td>âœ” ìš°ìˆ˜</td>
      <td>âœ” ìš°ìˆ˜</td>
    </tr>
    <tr>
      <td>ë²¡í„° ìœ ì‚¬ë„ ê²€ìƒ‰</td>
      <td>âœ˜ ë¯¸ì§€ì›</td>
      <td>âœ” ì§€ì›</td>
    </tr>
    <tr>
      <td>OpenAI ì„ë² ë”© í˜¸í™˜ì„±</td>
      <td>ë‚®ìŒ</td>
      <td>ë§¤ìš° ë†’ìŒ</td>
    </tr>
    <tr>
      <td>í™•ì¥ì„±</td>
      <td>ë†’ìŒ</td>
      <td>ë†’ìŒ</td>
    </tr>
    <tr>
      <td>ìš´ì˜ í¸ì˜ì„±</td>
      <td>ìµìˆ™í•¨</td>
      <td>ë‹¤ì†Œ ë³µì¡</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p><strong>ê²°ë¡ :</strong>
íŠ¸ëœì­ì…˜ ë¡œì§ì€ MariaDB,
ì„ë² ë”© ë° ì¶”ì²œ ê´€ë ¨ ì—°ì‚°ì€ PostgreSQLë¡œ <strong>ì—­í•  ë¶„ë¦¬ (CQRS-like êµ¬ì¡°)</strong></p>
</blockquote>

<hr />

<h2 id="í–¥í›„-í™•ì¥-í¬ì¸íŠ¸">í–¥í›„ í™•ì¥ í¬ì¸íŠ¸</h2>

<ul>
  <li><strong>RAG ì—°ê³„:</strong>
ì‚¬ìš©ì ê²€ìƒ‰ ìš”ì²­ ì‹œ ì„ë² ë”© ê¸°ë°˜ ë²¡í„° ê²€ìƒ‰ìœ¼ë¡œ
â€œìœ ì‚¬í•œ ì¥ì†Œâ€ ë˜ëŠ” â€œìœ ì‚¬í•œ í…Œë§ˆâ€ ìë™ ì¶”ì²œ</li>
  <li><strong>ì£¼ê¸°ì  ë²¡í„° ë¦¬í”„ë ˆì‹œ:</strong>
Spot descriptionì´ ì—…ë°ì´íŠ¸ë˜ë©´ embedding ìë™ ì¬ìƒì„±</li>
  <li><strong>ë©€í‹°ëª¨ë‹¬ í™•ì¥:</strong>
ì´ë¯¸ì§€ ì„¤ëª…ë¬¸(Image Caption)ì„ í•¨ê»˜ ì„ë² ë”©í•˜ì—¬
í…ìŠ¤íŠ¸ + ì´ë¯¸ì§€ ê¸°ë°˜ ì¶”ì²œ ê°•í™”</li>
</ul>

<hr />

<blockquote>
  <p>ğŸ”œ 6í¸ ì˜ˆê³ : â€œë‚˜ì™€ ë¹„ìŠ·í•œ ì—¬í–‰ìëŠ” ëˆ„êµ¬ì¼ê¹Œ â€” ì‚¬ìš©ì ì„ë² ë”©ê³¼ ì¶”ì²œ ë§¤ì¹­ ë¡œì§â€</p>
</blockquote>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 yunYoung e. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
